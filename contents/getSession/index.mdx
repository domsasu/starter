---
title: getSession
description: getSession guide for our application.
---

## Overview

The `getSession` server action allows you to retrieve the current user's session information from the server. This is a key component for authentication in Next.js applications.

```typescript showLineNumbers
// Server action implementation
'use server';

import { cookies } from 'next/headers';
import { verifyJwt } from '@/lib/auth';

export async function getSession() {
  const token = cookies().get('token')?.value;
  
  if (!token) {
    return null;
  }
  
  try {
    const payload = await verifyJwt(token);
    return {
      user: {
        id: payload.sub,
        email: payload.email,
        name: payload.name,
        role: payload.role,
      },
      expires: new Date(payload.exp * 1000),
    };
  } catch (error) {
    // Token is invalid or expired
    cookies().delete('token');
    return null;
  }
}
```

## Prerequisites

Before proceeding, ensure you have the following:

- Node.js installed
- Basic knowledge of command-line interface (CLI)
- A code editor (e.g., VSCode)

## Installation Steps

1. **Clone the Repository**:
   Clone the repository using the following command:

   ```bash showLineNumbers
   git clone https://github.com/your-repo/your-project.git
   ```

2. **Navigate to the Project Directory**:
   Use the `cd` command to navigate to your project directory:

   ```bash showLineNumbers
   cd your-project
   ```

3. **Install Dependencies**:
   Install the required dependencies using npm or yarn:

   ```bash showLineNumbers
   npm install
   # or
   yarn install
   ```

## Client Usage

Here's an example of how to use the `getSession` function in a client component:

```jsx showLineNumbers
// Client component with session data
'use client';

import { useEffect, useState } from 'react';
import { getSession } from '@/actions/auth';

export default function ProfilePage() {
  const [session, setSession] = useState(null);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    const fetchSession = async () => {
      const sessionData = await getSession();
      setSession(sessionData);
      setLoading(false);
    };
    
    fetchSession();
  }, []);
  
  if (loading) {
    return <div>Loading...</div>;
  }
  
  if (!session) {
    return <div>Not logged in</div>;
  }
  
  return (
    <div>
      <h1>Welcome, {session.user.name}!</h1>
      <p>Your email: {session.user.email}</p>
      <p>Your role: {session.user.role}</p>
    </div>
  );
}
```

## Additional Information

For more details, please refer to our official [documentation](#).
